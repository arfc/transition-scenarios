<simulation xml:base="/home/abachmann@anl.gov/transition-scenarios/input/haleu/inputs/" xmlns:xi="http://www.w3.org/2001/XInclude">
  <control>
    <decay>lazy</decay>
    <duration>1500</duration>
    <startmonth>1</startmonth>
    <startyear>1965</startyear> 
  </control>
  <archetypes>
    <spec>
      <lib>cycamore</lib>
      <name>Enrichment</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Reactor</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Sink</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Source</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Storage</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Separations</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Mixer</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>DeployInst</name>
    </spec>
    <spec>
      <lib>agents</lib>
      <name>NullRegion</name>
    </spec>
    <spec>
      <lib>openmcyclus.DepleteReactor</lib>
      <name>DepleteReactor</name>
    </spec>
  </archetypes>

  <xi:include href="united_states/buildtimes/inclusions.xml#xpointer(/inclusions/child::*)"/>
  <xi:include href="united_states/reactors/xe100_openmcyclus.xml"/>
  <xi:include href="united_states/reactors/usnc_mmr.xml"/>
  <xi:include href="united_states/reactors/voygr_openmcyclus.xml"/>
  <facility>
    <name>Sink_HLW</name>
    <config>
      <Sink>
        <in_commods>
          <val>cool_spent_uox</val>
          <val>cool_spent_mox</val>
          <val>separated_waste</val>
        </in_commods>
        <!-- Yucca Mountain Repository -->
        <latitude>36.8286</latitude>
        <longitude>-116.4364</longitude>
      </Sink>
    </config>
  </facility>
  <facility>
    <name>Sink_LLW</name>
    <config>
      <Sink>
        <in_commods>
          <val>tails</val>
        </in_commods>
        <!-- Yucca Mountain Repository -->
        <latitude>36.8286</latitude>
        <longitude>-116.4364</longitude>
      </Sink>
    </config>
  </facility>
  <facility>
    <name>Mine</name>
    <config>
      <Source>
        <outcommod>nat_u</outcommod>
        <outrecipe>nat_u</outrecipe>
        <throughput>1e6</throughput>
        <!-- Cameco Smith Ranch-Highland Mine -->
        <latitude>43.053736</latitude>
        <longitude>-105.685089</longitude>
      </Source>
    </config>
  </facility>
  <facility>
    <name>LWREnrichment</name>
    <config>
      <Enrichment>
        <feed_commod>nat_u</feed_commod>
        <feed_recipe>nat_u</feed_recipe>
        <product_commod>fresh_uox</product_commod>
        <tails_commod>tails</tails_commod>
        <tails_assay>0.002</tails_assay>
        <max_enrich>0.05</max_enrich>
        <!-- Portsmouth Gaseous Diffusion Plant (OH) -->
        <latitude>39.008333</latitude>
        <longitude>-83</longitude>
        <max_feed_inventory>5e6</max_feed_inventory>
      </Enrichment>
    </config>
  </facility>
  <facility>
    <name>MMREnrichment</name>
    <config>
      <Enrichment>
        <feed_commod>nat_u</feed_commod>
        <feed_recipe>nat_u</feed_recipe>
        <product_commod>fresh_MMR_uox</product_commod>
        <tails_commod>tails</tails_commod>
        <tails_assay>0.002</tails_assay>
        <max_enrich>0.20</max_enrich>
        <!-- Portsmouth Gaseous Diffusion Plant (OH) -->
        <latitude>39.008333</latitude>
        <longitude>-83</longitude>
        <max_feed_inventory>5e6</max_feed_inventory>
      </Enrichment>
    </config>
  </facility>
    <facility>
    <name>VOYGREnrichment</name>
    <config>
      <Enrichment>
        <feed_commod>nat_u</feed_commod>
        <feed_recipe>nat_u</feed_recipe>
        <product_commod>fresh_smr_uox</product_commod>
        <tails_commod>tails</tails_commod>
        <tails_assay>0.002</tails_assay>
        <max_enrich>0.16</max_enrich>
        <!-- Portsmouth Gaseous Diffusion Plant (OH) -->
        <latitude>39.008333</latitude>
        <longitude>-83</longitude>
        <max_feed_inventory>5e6</max_feed_inventory>
      </Enrichment>
    </config>
  </facility>
  <facility>
    <name>Xe100Enrichment</name>
    <config>
      <Enrichment>
        <feed_commod>nat_u</feed_commod>
        <feed_recipe>nat_u</feed_recipe>
        <product_commod>fresh_xe100_uox</product_commod>
        <tails_commod>tails</tails_commod>
        <tails_assay>0.002</tails_assay>
        <max_enrich>0.16</max_enrich>
        <!-- Portsmouth Gaseous Diffusion Plant (OH) -->
        <latitude>39.008333</latitude>
        <longitude>-83</longitude>
        <max_feed_inventory>5e6</max_feed_inventory>
      </Enrichment>
    </config>
  </facility>
  <facility>
    <name>WetStorage</name>
    <config>
      <Storage>
        <in_commods>
          <val>spent_uox</val>
        </in_commods>
        <in_recipe>spent_uox</in_recipe>
        <out_commods>
          <val>cool_spent_uox</val>
        </out_commods>
        <residence_time>72</residence_time>
        <!-- Yucca Mountain Repository -->
        <latitude>36.8286</latitude>
        <longitude>-116.4364</longitude>
      </Storage>
    </config>
  </facility>
  <facility>
    <name>MMR_UOX_Cooling</name>
    <config>
      <Storage>
        <in_commods>
          <val>spent_MMR_uox</val>
        </in_commods>
        <in_recipe>spent_MMR_haleu</in_recipe>
        <out_commods>
          <val>cool_MMR_uox</val>
        </out_commods>
        <latitude>36.8286</latitude>
        <longitude>-116.4364</longitude>
      </Storage>
    </config>
  </facility>
  
  <facility>
    <name>Xe100_UOX_Cooling</name>
    <config>
      <Storage>
        <in_commods>
          <val>spent_xe100_uox</val>
        </in_commods>
        <in_recipe>spent_xe100_haleu</in_recipe>
        <out_commods>
          <val>cool_xe100_uox</val>
        </out_commods>
        <latitude>36.8286</latitude>
        <longitude>-116.4364</longitude>
      </Storage>
    </config>
  </facility>
  
  <facility>
    <name>VOYGR_UOX_Cooling</name>
    <config>
      <Storage>
        <in_commods>
          <val>spent_smr_uox</val>
        </in_commods>
        <in_recipe>spent_smr_fuel</in_recipe>
        <out_commods>
          <val>cool_smr_uox</val>
        </out_commods>
        <latitude>36.8286</latitude>
        <longitude>-116.4364</longitude>
      </Storage>
    </config>
  </facility>

  <facility>
    <name>MOXCoolingPool</name>
    <config>
      <Storage>
        <in_commods>
          <val>spent_xe100_mox</val>
          <val>spent_smr_mox</val>
        </in_commods>
        <in_recipe>spent_xe100_mox</in_recipe>
        <out_commods>
          <val>cool_spent_mox</val>
        </out_commods>
        <residence_time>1</residence_time>
        <latitude>36.8286</latitude>
        <longitude>-116.4364</longitude>
      </Storage>
    </config>
  </facility>

  <facility>
  <name>SeparationsFacility</name>
  <config>
    <Separations>
      <feed_commods>
        <val>cool_spent_uox</val>
        <val>cool_smr_uox</val>
        <val>cool_xe100_uox</val>
        <val>cool_MMR_uox</val>
      </feed_commods>
      <feed_commod_prefs>
        <val>2</val>
        <val>1</val>
        <val>1</val>
        <val>1</val>
      </feed_commod_prefs>
      <feedbuf_size>10000000</feedbuf_size>
      <leftover_commod>separated_waste</leftover_commod>
      <streams>
        <item>
          <commod>separated_fissile</commod>
          <info>
            <buf_size>500000</buf_size>
            <efficiencies>
              <item>
                <comp>94000</comp>
                <eff>0.99</eff>
              </item>
            </efficiencies>
          </info>
        </item>
      </streams>
    </Separations>
  </config>
</facility>

<facility>
  <name>VOYGR_MOX_mixer</name>
  <config>
    <Mixer>
      <in_streams>
        <stream>
          <info>
            <mixing_ratio>0.09083</mixing_ratio>
            <buf_size>1e5</buf_size>
          </info>
          <commodities>
            <item> 
              <commodity>separated_fissile</commodity>
              <pref>1.0</pref>
            </item>
          </commodities>
        </stream>
        <stream>
          <info>
            <mixing_ratio>0.90917</mixing_ratio>
            <buf_size>1e5</buf_size>
          </info>
          <commodities>
            <item>
              <commodity>nat_u</commodity>
              <pref>1.0</pref>
            </item>
          </commodities>
        </stream>
      </in_streams>
      <out_commod>fresh_smr_mox</out_commod>
    </Mixer>
  </config>
</facility>

<facility>
  <name>Xe100_MOX_mixer</name>
  <config>
    <Mixer>
      <in_streams>
        <stream>
          <info>
            <mixing_ratio>0.17998</mixing_ratio>
           <buf_size>1e5</buf_size>
          </info>
          <commodities>
            <item> 
              <commodity>separated_fissile</commodity>
              <pref>2.0</pref>
            </item>
          </commodities>
        </stream>
        <stream>
          <info>
            <mixing_ratio>0.82002</mixing_ratio>
            <buf_size>1e5</buf_size>
          </info>
          <commodities>
            <item>
              <commodity>nat_u</commodity>
              <pref>1.0</pref>
            </item>
          </commodities>
        </stream>
      </in_streams>
      <out_commod>fresh_xe100_mox</out_commod>
    </Mixer>
  </config>
</facility>
  <region>
    <name>United States</name>
    <config>
      <NullRegion/>
    </config>    
    <institution>
      <name>FuelCycle</name>
      <initialfacilitylist>
      <!--entry>
          <prototype>Sink_HLW</prototype>
          <number>1</number>
        </entry-->
        <entry>
          <prototype>Sink_LLW</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>Mine</prototype>
          <number>10</number>
        </entry>
        <entry>
          <prototype>LWREnrichment</prototype>
          <number>3</number>
        </entry>
        <entry>
          <prototype>MMREnrichment</prototype>
          <number>3</number>
        </entry>
        <entry>
          <prototype>Xe100Enrichment</prototype>
          <number>3</number>
        </entry>
        <entry>
          <prototype>VOYGREnrichment</prototype>
          <number>3</number>
        </entry>
        <entry>
          <prototype>WetStorage</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>MMR_UOX_Cooling</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>Xe100_UOX_Cooling</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>VOYGR_UOX_Cooling</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>Xe100_MOX_mixer</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>VOYGR_MOX_mixer</prototype>
          <number>1</number>
        </entry>
        <entry>
          <prototype>MOXCoolingPool</prototype>
          <number>1</number>
        </entry>
      </initialfacilitylist>
      <config>
        <xi:include href="united_states/buildtimes/xe100_mmr_voygr_nogrowth_deployinst.xml"/>
      </config>
    </institution>

    <institution>
      <name>UNITED_STATES_OF_AMERICA</name>
      <config>
        <xi:include href="united_states/buildtimes/UNITED_STATES_OF_AMERICA/deployinst.xml"/>
      </config>
    </institution>

    <institution>
      <name>SeparationsInstitution</name>
      <config>
        <DeployInst>
          <prototypes>
            <val>SeparationsFacility</val>
            <val>Sink_HLW</val>
          </prototypes>
          <build_times>
            <val>661</val>
            <val>900</val>
          </build_times>
          <n_build>
            <val>1</val>
            <val>1</val>
          </n_build>
        </DeployInst>
      </config>
    </institution>
  </region>

  <xi:include href="united_states/recipes/uox_51.xml#xpointer(/recipes/child::*)"/>
  <xi:include href="united_states/recipes/xe100_fuel.xml#xpointer(/recipes/child::*)"/>
  <xi:include href="united_states/recipes/mmr_fuel.xml#xpointer(/recipes/child::*)"/>
  <xi:include href="united_states/recipes/voygr_fuel.xml#xpointer(/recipes/child::*)"/>
</simulation>
