
<simulation xmlns:xi="http://www.w3.org/2001/XInclude">
  <control>
    <duration>1200</duration>
    <startmonth>5</startmonth>
    <startyear>2013</startyear>
    <decay>lazy</decay>
  </control>

  <archetypes>
    <spec>
      <lib>cycamore</lib>
      <name>Source</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Sink</name>
    </spec>
    <spec>
        <lib>cycamore</lib>
        <name>Reactor</name>
    </spec>
    <spec>
      <lib>agents</lib>
      <name>NullRegion</name>
    </spec>
    <spec>
      <lib>agents</lib>
      <name>NullInst</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Separations</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>DeployInst</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Separations</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Enrichment</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Mixer</name>
    </spec>
    <spec>
      <lib>cycamore</lib>
      <name>Storage</name>
    </spec>
  </archetypes>


<facility>
    <name>smr</name>
    <!-- Nuscale, assume burnup up 51 GWdth/t underestimation -->
    <config>
      <Reactor>
        <fuel_inrecipes>  <val>smr_recipe</val>        </fuel_inrecipes>
        <fuel_outrecipes> <val>uox_used_fuel_recipe</val>   </fuel_outrecipes>
        <fuel_incommods>  <val>smr_fuel</val>                    </fuel_incommods>
        <fuel_outcommods> <val>smr_used</val>              </fuel_outcommods>
        <fuel_prefs>      <val>1.0</val>                    </fuel_prefs>
        <cycle_time>24</cycle_time>
        <refuel_time>1</refuel_time>
        <assem_size>447</assem_size>
        <n_assem_core>37</n_assem_core>
        <n_assem_batch>12</n_assem_batch>
        <power_cap>60</power_cap>
      </Reactor>
    </config>
</facility>

<facility>
        <!-- Stores uox unf for 48 months (4years) -->
    <name>uox_storage</name>
    <config>
        <Storage>
            <in_commods>
                <val>smr_used</val>
            </in_commods>
            <residence_time>36</residence_time>
            <out_commods>
                <val>cooled_uox</val>
            </out_commods>
        </Storage>
    </config>
</facility>

<facility>
    <name>tailings_storage</name>
    <config>
        <Storage>
            <in_commods>
                <val>tailings</val>
            </in_commods>
            <residence_time>36</residence_time>
            <out_commods>
                <val>cooled_tailings</val>
            </out_commods>
        </Storage>
    </config>
</facility>


  <facility>
    <name>enrichment</name>
    <config>
      <Enrichment>
        <feed_commod>natl_u</feed_commod>
        <feed_recipe>natl_u_recipe</feed_recipe>
        <product_commod>smr_fuel</product_commod>
        <tails_assay>0.003</tails_assay>
        <tails_commod>tailings</tails_commod>
        <swu_capacity>1e100</swu_capacity>
        <initial_feed>1e100</initial_feed>
      </Enrichment>
    </config>
  </facility>

  <facility>
    <name>nat_u_source</name>
    <config>
      <Source>
        <outcommod>natl_u</outcommod>
        <outrecipe>natl_u_recipe</outrecipe>
        <throughput>1e100</throughput>
      </Source>
    </config>
  </facility>

  <facility>
    <name>final_sink</name>
    <config>
      <Sink>
        <in_commods>
          <val>cooled_tailings</val>
          <val>cooled_uox</val>
        </in_commods>
        <capacity>1e100</capacity>
      </Sink>
    </config>
  </facility>

  <region>
    <name>us</name>
    <config><NullRegion/></config>
    <institution>
      <name>oneinst</name>
      <config>
        <DeployInst>
          <prototypes>
            <val>smr</val>
            <val>smr</val>
          </prototypes>
          <build_times>
            <val>1</val>
            <val>961</val>
          </build_times>
          <n_build>
            <val>1667</val>
            <val>1667</val>
          </n_build>
          <lifetimes>
            <val>960</val>
            <val>960</val>
          </lifetimes>
        </DeployInst>
      </config>
    </institution>
  </region>

  
<region>
    <name>Sink_Source</name>
    <config><NullRegion/></config>
        <institution>
         <name>Sink_Source_Inst</name>
         <config><NullInst/></config>
        <initialfacilitylist>
          <entry>
            <number>1</number>
            <prototype>nat_u_source</prototype>
          </entry>
         
          <entry>
            <number>1</number>
            <prototype>enrichment</prototype>
          </entry>
          <entry>
            <number>1</number>
            <prototype>final_sink</prototype>
          </entry>

          <entry>
            <number>1</number>
            <prototype>uox_storage</prototype>
          </entry>
          <entry>
            <number>1</number>
            <prototype>tailings_storage</prototype>
          </entry>
        </initialfacilitylist>
        </institution>
</region>
<xi:include href='./recipes.xml' xpointer='xpointer(/root/recipe)'/>
</simulation>